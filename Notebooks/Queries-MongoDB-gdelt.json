{"paragraphs":[{"text":"from pymongo import MongoClient\nimport pandas as pd\nimport numpy as np\nimport plotly.express as px\n\npd.options.display.max_rows = 999","user":"anonymous","dateUpdated":"2020-01-22T22:59:44+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1579721967428_98700547","id":"20200122-193927_224414523","dateCreated":"2020-01-22T19:39:27+0000","dateStarted":"2020-01-22T19:48:22+0000","dateFinished":"2020-01-22T19:48:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1756"},{"text":"def connect_mongo(db_name, collection_name):\n\n    client = MongoClient(\"mongodb://gdeltuser:gdeltpass@ec2-15-188-82-40.eu-west-3.compute.amazonaws.com:27017,ec2-15-188-185-108.eu-west-3.compute.amazonaws.com:27017,ec2-35-180-90-165.eu-west-3.compute.amazonaws.com:27017/\" + db_name + \".\" + collection_name + \"?replicaSet=rsGdelt\", readPreference='primaryPreferred')\n    \n    db = client[db_name]\n    collection = db[collection_name]\n    return db, collection\n\ndb, collection = connect_mongo('gdelt', 'query3') \ndb.list_collection_names()","user":"anonymous","dateUpdated":"2020-01-22T23:05:05+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579722063882_1236656611","id":"20200122-194103_1918235887","dateCreated":"2020-01-22T19:41:03+0000","dateStarted":"2020-01-22T23:05:05+0000","dateFinished":"2020-01-22T22:41:54+0000","status":"PENDING","progressUpdateIntervalMs":500,"$$hashKey":"object:1757","errorMessage":""},{"text":"def read_mongo(db, collection, query={}, no_id=True):\n    \"\"\" Read from Mongo and Store into DataFrame \"\"\"\n\n    # Make a query to the specific DB and Collection\n    cursor = db[collection].find(query)\n\n    # Expand the cursor and construct the DataFrame\n    df =  pd.DataFrame(list(cursor))\n\n    # Delete the _id\n    if no_id:\n        del df['_id']\n\n    return df","user":"anonymous","dateUpdated":"2020-01-22T22:46:30+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1579722583043_-2023992014","id":"20200122-194943_1235006153","dateCreated":"2020-01-22T19:49:43+0000","dateStarted":"2020-01-22T22:46:30+0000","dateFinished":"2020-01-22T22:46:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:1758"},{"text":"data = pd.DataFrame(list(collection.find()))","user":"anonymous","dateUpdated":"2020-01-22T22:46:57+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579732331702_1639149728","id":"20200122-223211_985001422","dateCreated":"2020-01-22T22:32:11+0000","dateStarted":"2020-01-22T22:46:57+0000","dateFinished":"2020-01-22T22:43:24+0000","status":"RUNNING","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1759"},{"text":"collection.find_one()","user":"anonymous","dateUpdated":"2020-01-22T22:48:19+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579732431714_-2007556832","id":"20200122-223351_491866037","dateCreated":"2020-01-22T22:33:51+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:1760"}],"name":"Queries-MongoDB-gdelt","id":"2EYA19HM2","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"python:shared_process":[],"sh:shared_process":[],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}